- release_tracks: [ALPHA]

  help_text:
    brief: create deployment
    description: creates a deployment
    examples: |
      To create a deployment `test-deployment` in location `us-central1`, run:

      $ {command} test-deployment --location=us-central1

  request:
    collection: telecomdatafabric.projects.locations.deployments
    api_version: v1alpha
    modify_request_hooks:
    - googlecloudsdk.api_lib.telecomdatafabric.create_deployment_args:GenerateCreateDeployment

  arguments:
    resource:
      help_text: TelecomDataFabric deployment
      spec: !REF googlecloudsdk.command_lib.telecomdatafabric.resources:deployment
    params:
    - group:
        required: true
        mutex: true
        help_text: Specify template-gcs-path or template-id.
        params:
        - arg_name: template-id
          api_field: deployment.templateId
          help_text: TDF provided template id
        - arg_name: template-gcs-path
          api_field: deployment.templateGcsPath
          help_text: Private template gcs path.
    - group:
        mutex: true
        help_text: Specify lake or lake-info.
        params:
        - arg_name: lake
          api_field: deployment.lake
          help_text: The existing dataplex lake id
          processor: googlecloudsdk.api_lib.telecomdatafabric.lake:Lake
        - arg_name: lake-info
          api_field: deployment.lakeInfo
          help_text: The Dataplex lake id to create
          processor: googlecloudsdk.api_lib.telecomdatafabric.lake:LakeInfo
    - arg_name: parameters
      metavar: KEY=VALUE
      type: 'googlecloudsdk.calliope.arg_parsers:ArgDict:'
      api_field: deployment.parameters
      help_text: Deployment parameters which is map of string key value pair, eg- --parameters data_adapter=METRICS_TRANSFORMER,parser_details="{\"format\":\"JSON\"}".
    - arg_name: deployment-project
      api_field: deployment.projectId
      help_text: Deployment project.
    - arg_name: fabric-id
      api_field: deployment.fabricId
      help_text: Existing fabric to which the deployment is attached.

  async:
    collection: telecomdatafabric.projects.locations.operations
